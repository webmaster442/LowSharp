<mah:MetroWindow
    x:Class="LowSharp.Client.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:comon="clr-namespace:LowSharp.Client.Comon"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:LowSharp.Client"
    xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="LowSharp"
    Width="{comon:WindowSizeProvider Type=Width}"
    Height="{comon:WindowSizeProvider Type=Height}"
    TitleAlignment="Center"
    WindowStartupLocation="CenterScreen"
    mc:Ignorable="d">
    <mah:MetroWindow.LeftWindowCommands>
        <mah:WindowCommands>
            <Menu
                Grid.Row="0"
                Grid.Column="0"
                Margin="0,0,0,0"
                VerticalAlignment="Center"
                Background="Transparent">
                <MenuItem Header="Application">
                    <MenuItem Header="Exit" />
                </MenuItem>
            </Menu>
        </mah:WindowCommands>
    </mah:MetroWindow.LeftWindowCommands>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <TabControl
            Grid.Row="1"
            Grid.ColumnSpan="2"
            Style="{DynamicResource MahApps.Styles.TabControl.VisualStudio}" />
        <StatusBar
            Grid.Row="2"
            Margin="5">
            <Menu>
                <MenuItem>
                    <MenuItem.Style>
                        <Style
                            BasedOn="{StaticResource {x:Type MenuItem}}"
                            TargetType="MenuItem">
                            <Style.Triggers>
                                <DataTrigger
                                    Binding="{Binding Client.IsConnected}"
                                    Value="false">
                                    <Setter Property="Header">
                                        <Setter.Value>
                                            <StackPanel Orientation="Horizontal">
                                                <Canvas
                                                    Width="24"
                                                    Height="24">
                                                    <Path
                                                        Data="M13,19H14A1,1 0 0,1 15,20H15.73L13,17.27V19M22,20V21.18L20.82,20H22M21,22.72L19.73,24L17.73,22H15A1,1 0 0,1 14,23H10A1,1 0 0,1 9,22H2V20H9A1,1 0 0,1 10,19H11V17H4A1,1 0 0,1 3,16V12A1,1 0 0,1 4,11H6.73L4.73,9H4A1,1 0 0,1 3,8V7.27L1,5.27L2.28,4L21,22.72M4,3H20A1,1 0 0,1 21,4V8A1,1 0 0,1 20,9H9.82L7,6.18V5H5.82L3.84,3C3.89,3 3.94,3 4,3M20,11A1,1 0 0,1 21,12V16A1,1 0 0,1 20,17H17.82L11.82,11H20M9,7H10V5H9V7M9,15H10V14.27L9,13.27V15M5,13V15H7V13H5Z"
                                                        Fill="{StaticResource Red}" />
                                                </Canvas>
                                                <TextBlock
                                                    Margin="5,0"
                                                    VerticalAlignment="Center"
                                                    Text="Disconnected" />
                                            </StackPanel>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>
                                <DataTrigger
                                    Binding="{Binding Client.IsConnected}"
                                    Value="true">
                                    <Setter Property="Header">
                                        <Setter.Value>
                                            <StackPanel Orientation="Horizontal">
                                                <Canvas
                                                    Width="24"
                                                    Height="24">
                                                    <Path
                                                        Data="M13,19H14A1,1 0 0,1 15,20H22V22H15A1,1 0 0,1 14,23H10A1,1 0 0,1 9,22H2V20H9A1,1 0 0,1 10,19H11V17H4A1,1 0 0,1 3,16V12A1,1 0 0,1 4,11H20A1,1 0 0,1 21,12V16A1,1 0 0,1 20,17H13V19M4,3H20A1,1 0 0,1 21,4V8A1,1 0 0,1 20,9H4A1,1 0 0,1 3,8V4A1,1 0 0,1 4,3M9,7H10V5H9V7M9,15H10V13H9V15M5,5V7H7V5H5M5,13V15H7V13H5Z"
                                                        Fill="{StaticResource Green}" />
                                                    <TextBlock
                                                        Margin="5,0"
                                                        VerticalAlignment="Center"
                                                        Text="Connected" />
                                                </Canvas>
                                            </StackPanel>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </MenuItem.Style>
                    <MenuItem
                        Command="{Binding Client.StartCommand}"
                        Header="Start"
                        IsEnabled="{Binding Client.IsRunning, Converter={comon:NegateConverter}}">
                        <MenuItem.Icon>
                            <Canvas
                                Width="24"
                                Height="24">
                                <Path
                                    Data="M12,4C14.1,4 16.1,4.8 17.6,6.3C20.7,9.4 20.7,14.5 17.6,17.6C15.8,19.5 13.3,20.2 10.9,19.9L11.4,17.9C13.1,18.1 14.9,17.5 16.2,16.2C18.5,13.9 18.5,10.1 16.2,7.7C15.1,6.6 13.5,6 12,6V10.6L7,5.6L12,0.6V4M6.3,17.6C3.7,15 3.3,11 5.1,7.9L6.6,9.4C5.5,11.6 5.9,14.4 7.8,16.2C8.3,16.7 8.9,17.1 9.6,17.4L9,19.4C8,19 7.1,18.4 6.3,17.6Z"
                                    Fill="{StaticResource White}" />
                            </Canvas>
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem
                        Command="{Binding Client.StopCommand}"
                        Header="Stop"
                        IsEnabled="{Binding Client.IsRunning}">
                        <MenuItem.Icon>
                            <Canvas
                                Width="24"
                                Height="24">
                                <Path
                                    Data="M8.27,3L3,8.27V15.73L8.27,21H15.73C17.5,19.24 21,15.73 21,15.73V8.27L15.73,3M9.1,5H14.9L19,9.1V14.9L14.9,19H9.1L5,14.9V9.1M9.12,7.71L7.71,9.12L10.59,12L7.71,14.88L9.12,16.29L12,13.41L14.88,16.29L16.29,14.88L13.41,12L16.29,9.12L14.88,7.71L12,10.59"
                                    Fill="{StaticResource White}" />
                            </Canvas>
                        </MenuItem.Icon>
                    </MenuItem>
                    <Separator />
                    <MenuItem
                        Command="{Binding Client.ConnectCommand}"
                        Header="Connect">
                        <MenuItem.IsEnabled>
                            <MultiBinding Converter="{comon:AndConverter}">
                                <Binding
                                    Converter="{comon:NegateConverter}"
                                    Path="Client.IsConnected" />
                                <Binding Path="Client.IsRunning" />
                            </MultiBinding>
                        </MenuItem.IsEnabled>
                        <MenuItem.Icon>
                            <Canvas
                                Width="24"
                                Height="24">
                                <Path
                                    Data="M21.4 7.5C22.2 8.3 22.2 9.6 21.4 10.3L18.6 13.1L10.8 5.3L13.6 2.5C14.4 1.7 15.7 1.7 16.4 2.5L18.2 4.3L21.2 1.3L22.6 2.7L19.6 5.7L21.4 7.5M15.6 13.3L14.2 11.9L11.4 14.7L9.3 12.6L12.1 9.8L10.7 8.4L7.9 11.2L6.4 9.8L3.6 12.6C2.8 13.4 2.8 14.7 3.6 15.4L5.4 17.2L1.4 21.2L2.8 22.6L6.8 18.6L8.6 20.4C9.4 21.2 10.7 21.2 11.4 20.4L14.2 17.6L12.8 16.2L15.6 13.3Z"
                                    Fill="{StaticResource White}" />
                            </Canvas>
                        </MenuItem.Icon>
                    </MenuItem>
                </MenuItem>
            </Menu>
        </StatusBar>
    </Grid>
</mah:MetroWindow>

